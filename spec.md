# 算数学習アプリ 仕様書

## 1. アプリ概要
- アプリ名: さんすうキッズ
- コンセプト: 計算を解いてメダルを集める達成感を通じ、算数を楽しく習慣化する
- ターゲット: 幼児〜小学校低学年
- 対応プラットフォーム: iOS / Android（マルチプラットフォーム開発を想定）

## 2. 画面構成
アプリは以下の9つの主要画面で構成する。

### 2-1. ホーム画面
- 「スタート」ボタン：モード選択画面へ移動
- 「メダルずかん」ボタン：メダル図鑑画面へ移動
- 「せってい」ボタン：設定画面へ移動

### 2-2. モード選択画面
- モードを以下から選択
  - たしざん：足し算だけが出題される
  - ひきざん：引き算だけが出題される
  - かけざん：掛け算だけが出題される
  - わりざん：割り算だけが出題される
  - すべて：四則演算すべてが出題される

### 2-3. レベル選択画面
- レベルを以下から選択。出題範囲は演算タイプにより異なる
  - かんたん
    - たしざん・ひきざん・かけざん・わりざん・すべて：1〜9の範囲
  - ふつう
    - たしざん・ひきざん・すべて：10〜100の範囲
    - かけざん・わりざん：10〜20の範囲
  - むずかしい
    - たしざん・ひきざん・すべて：100〜10000の範囲
    - かけざん・わりざん：20〜100の範囲
- 答えがマイナスになることはない
- わりざんは必ず割り切れる（余りが出ない）問題のみ出題される
- 「すべて」モード以外では、歯車アイコンから難易度調整画面へ移動できる

### 2-4. 難易度調整画面
- 選択中のモード・レベルに対して、出題範囲（最小値〜最大値）をスライダーで調整できる
- 「リセット」ボタンでデフォルトの出題範囲に戻す
- デフォルトの出題範囲より簡単（範囲を狭く）に設定した場合、メダルが獲得できない旨の警告を表示する
- 「もどる」ボタン：レベル選択画面へ戻る

### 2-5. 計算クイズ画面
- ヒント表示エリア：かんたんモードでヒントありの場合、計算のヒントを絵文字で表示
  - 絵文字はフルーツ10個のうちランダムで1個を使用する
  - 絵文字が🍎で、問題が3+5の場合、🍎🍎🍎と🍎🍎🍎🍎🍎を区分けして表示する
  - 絵文字が🍊で、問題が4-2の場合、🍊🍊🍊🍊を表示し、末尾の🍊🍊を強調色にする
  - 絵文字が🍒で、問題が3×4の場合、🍒を小さく3列×4行のグリッドで表示する
  - 絵文字が🍌で、問題が12÷4の場合、🍌を小さく3列×4行のグリッドで表示し、2行目以降を強調色にする
- 問題表示エリア
- 回答用テンキー：0〜9、1文字削除、決定ボタン
- 進捗バー：10問中何問目かを表示
- 戻るボタン：1問以上回答済みなら直前の回答を取り消して前の問題に戻る
  - 1問も回答していなければレベル選択画面へ戻る

### 2-6. 結果画面
- 正答率を100点満点で表示
- 獲得したメダルの表示
- 「こたえあわせ」ボタン：答え合わせ画面へ移動
- 「もういちど」ボタン：モード選択画面へ移動
- 「ホームへ」ボタン：ホーム画面へ移動

### 2-7. 答え合わせ画面
- その回で出題された全10問すべてについて、ユーザーの答えと正しい答えを表示
- 表示は1問ごとにページ遷移して行う
- 計算クイズ画面と似たUI/UXを提供する（一覧表は使わない）
- 画面下部に「まえ」「つぎ」ボタンを配置し、前後の問題へ移動できるようにする
- 1問目では「まえ」ボタンを「もどる」ボタンに変更し、タップで結果画面へ戻る
- 最終問題では「つぎ」ボタンを「おわる」ボタンに変更し、タップで結果画面へ戻る

### 2-8. メダル図鑑画面
- モード別（たしざん・ひきざん・かけざん・わりざん・すべて）×レベル別（かんたん・ふつう・むずかしい）の15カテゴリでメダルを表示
- 各カテゴリごとに獲得したもっとも上位のメダルを表示
- メダル未獲得の場合は空白表示
- メダル獲得済みのセルをタップすると、各メダル種類（🥇🥈🥉⭐）ごとの獲得回数を表示
- 「もどる」ボタン：ホーム画面へ戻る

### 2-9. 設定画面
- 1問ごとに答え合わせをするかどうかについて、トグルスイッチで選択できる
  - トグルスイッチがONなら、計算クイズ画面で1問回答するごとにダイアログで正誤を表示する
    - 1問目→ダイアログ→2問目→ダイアログ→...→10問目→結果画面
  - トグルスイッチがOFFなら、計算クイズ画面で10問回答し終えた後に結果画面へ遷移する
- かんたんモードのみ、ヒントを出すかどうかについて、トグルスイッチで選択できる
  - トグルスイッチがONなら、計算クイズ画面にヒント表示エリアを表示する
  - トグルスイッチがOFFなら、ヒント表示エリアは表示しない
- 「もどる」ボタン：ホーム画面へ戻る

## 3. メダル獲得ルール
1回（10問）の正答率に基づいて判定する。

- 金メダル：正答率100%
- 銀メダル：正答率80%〜99%
- 銅メダル：正答率60%〜79%
- 星メダル：正答率60%未満

難易度調整画面で出題範囲をデフォルトより簡単に設定した場合、メダルは獲得できない。

## 4. 技術仕様
- 開発フレームワーク：[Kotlin Multiplatform](https://kotlinlang.org/docs/multiplatform.html)
- UI設計：[Jetpack Compose](https://developer.android.com/compose)、[Navigation 3 in Compose Multiplatform](https://kotlinlang.org/docs/multiplatform/compose-navigation-3.html)
    - アクセシビリティに配慮した大きなボタンと高コントラストな配色
    - 縦向き・横向きのレスポンシブレイアウトに全画面が対応

## 5. 将来的な拡張機能
- データ管理：ローカルストレージを使用してメダル獲得履歴を保存
- 音とアニメーション：正解時・不正解時の視覚・聴覚的なフィードバック（音とエフェクト）
- タイムアタックモード：解答速度に応じた特別ボーナスの付与
- 保護者用レポート：日々の学習時間や苦手な計算分野の可視化
- アバター機能：メダルを集めるとキャラクターの装備が豪華になる仕組み
- ログイン機能：リモートストレージを使用してユーザーごとにメダル獲得履歴を保存、IDとパスワードでログイン可能
